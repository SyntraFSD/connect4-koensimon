{"version":3,"sources":["../../src/js/game.js"],"names":["mainElement","document","querySelector","drawMessage","initGameState","state","turn","winner","winnerColor","full","board","generateBoardHtml","reduce","colsHtml","col","colIndex","colHtml","rowsHtml","row","rowIndex","drawBoard","htmlElement","boardElement","createElement","id","classList","add","innerHTML","appendChild","changeTurn","htmlboard","remove","dropStone","colList","indexEmpty","dataset","index","acc","value","console","log","fullCheck","checkFull","fullCheckChecker","stateMessage","addEventListener","event","target","closest","matches","newDrop","textContent"],"mappings":"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","sourcesContent":["// html elements\r\nlet mainElement = document.querySelector('main');\r\nconst drawMessage = document.querySelector('.drawMessage');\r\n\r\ninitGameState();\r\n\r\nlet state = {\r\n  turn: 'yellow',\r\n  winner: false,\r\n  winnerColor: null,\r\n  full: false,\r\n  board: [\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n  ]\r\n};\r\n\r\nfunction generateBoardHtml(board) {\r\n  return board.reduce(function (colsHtml, col, colIndex) {\r\n    let colHtml = '<div class=\"col\" data-index=\"'+ colIndex +'\">';\r\n    colHtml += col.reduce(function (rowsHtml, row, rowIndex) {\r\n      return '<div class=\"row ' + row + '\"></div>' + rowsHtml;\r\n    }, '');\r\n    colHtml += '</div>';\r\n    return colsHtml + colHtml;\r\n  }, '');\r\n}\r\nfunction drawBoard(board, turn, htmlElement, boardElement) {\r\n  if(!boardElement){\r\n    boardElement = document.createElement('div');\r\n  }\r\n  boardElement.id = 'board';\r\n  boardElement.classList.add(turn);\r\n  boardElement.innerHTML = generateBoardHtml(board);\r\n  htmlElement.appendChild(boardElement);\r\n  return boardElement;\r\n}\r\n\r\nfunction changeTurn(state, col) {\r\n  if(state.turn === 'yellow'){\r\n    state.turn = 'red';\r\n    htmlboard.classList.remove('yellow');\r\n    htmlboard.classList.add('red');\r\n  } else {\r\n    state.turn = 'yellow';\r\n    htmlboard.classList.remove('red');\r\n    htmlboard.classList.add('yellow');\r\n  }\r\n\r\n\r\n\r\n  return state;\r\n}\r\n\r\nfunction dropStone(colList,state) {\r\n\r\n  const indexEmpty = state.board[colList.dataset.index].reduce(function (acc,value,index) {\r\n   if(acc === false){\r\n     if(value === 'empty'){\r\n       return index;\r\n     }else {\r\n       return acc;\r\n     }\r\n   } else {\r\n     return acc;\r\n   }\r\n }, false);\r\n\r\n  if (indexEmpty === false){\r\n    return false;\r\n  } else {\r\n    state.board[colList.dataset.index][indexEmpty] = state.turn;\r\n    console.log(state.board);\r\n    return state;\r\n  }\r\n\r\n}\r\n\r\nfunction fullCheck(board) {\r\n  let checkFull = board.reduce(function (colsHtml, col, colIndex){\r\n    return col.reduce(function (acc,row,rowIndex) {\r\n      if(row === 'empty'){\r\n        return false;\r\n      } else {\r\n        return acc;\r\n      }\r\n    }, colsHtml);\r\n  }, true);\r\n    return checkFull;\r\n}\r\n\r\nfunction initGameState(){\r\n  state = {\r\n    turn: 'yellow',\r\n    winner: false,\r\n    winnerColor: null,\r\n    full: false,\r\n    board: [\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ]\r\n  }\r\n}\r\n\r\nfunction fullCheckChecker(state) {\r\n  if (fullCheck(state.board) === true){\r\n    state.full = true;\r\n  }\r\n  return state;\r\n}\r\n\r\nfunction stateMessage(state) {\r\n  if(state.full === true){\r\n    return \"gelijk\";\r\n  }else if (state.winner === true){\r\n    return \"winner \"+state.winnerColor;\r\n  }\r\n  return \"\"\r\n}\r\n\r\n\r\nlet htmlboard = drawBoard(state.board, state.turn, mainElement)\r\n\r\n\r\nhtmlboard.addEventListener('click', function (event) {\r\n  const colList = event.target.closest('.col');\r\n  if(event.target.matches('.col,.row')) {\r\n    const newDrop = dropStone(colList, state);\r\n    if (newDrop) {\r\n\r\n      state = newDrop;\r\n      state = fullCheckChecker(state);\r\n      state = changeTurn(state);\r\n      drawMessage.textContent = stateMessage(state);\r\n      drawBoard(state.board, state.turn, mainElement, htmlboard);\r\n\r\n    } else if (state.full === true) {\r\n\r\n      initGameState();\r\n      drawBoard(state.board, state.turn, mainElement, htmlboard);\r\n      drawMessage.textContent = stateMessage(state);\r\n\r\n    }\r\n  }\r\n});\r\n\r\n\r\n"],"file":"game.js"}