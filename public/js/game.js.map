{"version":3,"sources":["../../src/js/game.js"],"names":["mainElement","document","querySelector","drawMessage","state","initGameState","turn","winner","winnerColor","full","board","generateBoardHtml","reduce","colsHtml","col","colIndex","colHtml","rowsHtml","row","rowIndex","drawBoard","htmlElement","boardElement","createElement","id","classList","add","innerHTML","appendChild","changeTurn","htmlboard","remove","dropStone","colList","indexEmpty","dataset","index","acc","value","console","log","fullCheck","checkFull","fullCheckChecker","stateMessage","addEventListener","event","target","closest","matches","newDrop","textContent","window","functio"],"mappings":"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","sourcesContent":["// ----------------- 1. MODEL --------------------------\r\n\r\n// html elements\r\nlet mainElement = document.querySelector('main');\r\nconst drawMessage = document.querySelector('.drawMessage');\r\n\r\nlet state = null;\r\n\r\n\r\n\r\n// -------------------- 2. UPDATE (only pure functions here) --------------------------\r\nfunction initGameState(){\r\n  return {\r\n    turn: 'yellow',\r\n    winner: false,\r\n    winnerColor: null,\r\n    full: false,\r\n    board: [\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n      ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n    ]\r\n  }\r\n}\r\n\r\n\r\n\r\n// ---------------------3. VIEW -----------------------------------------------\r\n\r\nfunction generateBoardHtml(board) {\r\n  return board.reduce(function (colsHtml, col, colIndex) {\r\n    let colHtml = '<div class=\"col\" data-index=\"'+ colIndex +'\">';\r\n    colHtml += col.reduce(function (rowsHtml, row, rowIndex) {\r\n      return '<div class=\"row ' + row + '\"></div>' + rowsHtml;\r\n    }, '');\r\n    colHtml += '</div>';\r\n    return colsHtml + colHtml;\r\n  }, '');\r\n}\r\n\r\n\r\ninitGameState();\r\n\r\n\r\n\r\n\r\nfunction drawBoard(board, turn, htmlElement, boardElement) {\r\n  if(!boardElement){\r\n    boardElement = document.createElement('div');\r\n  }\r\n  boardElement.id = 'board';\r\n  boardElement.classList.add(turn);\r\n  boardElement.innerHTML = generateBoardHtml(board);\r\n  htmlElement.appendChild(boardElement);\r\n  return boardElement;\r\n}\r\n\r\nfunction changeTurn(state, col) {\r\n  if(state.turn === 'yellow'){\r\n    state.turn = 'red';\r\n    htmlboard.classList.remove('yellow');\r\n    htmlboard.classList.add('red');\r\n  } else {\r\n    state.turn = 'yellow';\r\n    htmlboard.classList.remove('red');\r\n    htmlboard.classList.add('yellow');\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction dropStone(colList,state) {\r\n\r\n  const indexEmpty = state.board[colList.dataset.index].reduce(function (acc,value,index) {\r\n   if(acc === false){\r\n     if(value === 'empty'){\r\n       return index;\r\n     }else {\r\n       return acc;\r\n     }\r\n   } else {\r\n     return acc;\r\n   }\r\n }, false);\r\n\r\n  if (indexEmpty === false){\r\n    return false;\r\n  } else {\r\n    state.board[colList.dataset.index][indexEmpty] = state.turn;\r\n    console.log(state.board);\r\n    return state;\r\n  }\r\n\r\n}\r\n\r\nfunction fullCheck(board) {\r\n  let checkFull = board.reduce(function (colsHtml, col, colIndex){\r\n    return col.reduce(function (acc,row,rowIndex) {\r\n      if(row === 'empty'){\r\n        return false;\r\n      } else {\r\n        return acc;\r\n      }\r\n    }, colsHtml);\r\n  }, true);\r\n    return checkFull;\r\n}\r\n\r\n\r\n\r\nfunction fullCheckChecker(state) {\r\n  if (fullCheck(state.board) === true){\r\n    state.full = true;\r\n  }\r\n  return state;\r\n}\r\n\r\nfunction stateMessage(state) {\r\n  if(state.full === true){\r\n    return \"gelijk\";\r\n  }else if (state.winner === true){\r\n    return \"winner \"+state.winnerColor;\r\n  }\r\n  return \"\"\r\n}\r\n\r\n\r\nlet htmlboard = drawBoard(state.board, state.turn, mainElement)\r\n\r\n// -------------------------- 4. EVENTS -----------------------------------------\r\n\r\nhtmlboard.addEventListener('click', function (event) {\r\n  const colList = event.target.closest('.col');\r\n  if(event.target.matches('.col,.row')) {\r\n    const newDrop = dropStone(colList, state);\r\n    if (newDrop) {\r\n\r\n      state = newDrop;\r\n      state = fullCheckChecker(state);\r\n      state = changeTurn(state);\r\n      drawMessage.textContent = stateMessage(state);\r\n      drawBoard(state.board, state.turn, mainElement, htmlboard);\r\n\r\n    } else if (state.full === true) {\r\n\r\n      initGameState();\r\n      drawBoard(state.board, state.turn, mainElement, htmlboard);\r\n      drawMessage.textContent = stateMessage(state);\r\n\r\n    }\r\n  }\r\n})\r\nwindow.addEventListener('load', functio())\r\n;\r\n\r\n\r\n"],"file":"game.js"}