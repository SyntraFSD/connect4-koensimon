{"version":3,"sources":["../../src/js/login.js"],"names":["loginSwitch","document","registerSwitch","loginForm","registerForm","loginAlert","fromForm","toForm","event","switchForm","inputFields","Form","formData","inputField","request","response","JSON","showLoginRequest","window","setTimeout","console","getFormData"],"mappings":"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","sourcesContent":["const loginSwitch = document.querySelector('.login-switch');\r\nconst registerSwitch = document.querySelector('.register-switch');\r\nconst loginForm = document.querySelector('.wrapper');\r\nconst registerForm = document.querySelector('.wrapper-registration');\r\nconst loginAlert = document.querySelector('.error');\r\n\r\nfunction switchForm(fromForm, toForm) {\r\n  fromForm.classList.add('hide');\r\n  toForm.classList.remove('hide');\r\n}\r\n\r\nfunction showLoginForm(event) {\r\n  event.preventDefault();\r\n  switchForm(registerForm, loginForm);\r\n}\r\n\r\nfunction showRegisterForm(event) {\r\n  event.preventDefault();\r\n  switchForm(loginForm, registerForm);\r\n}\r\n\r\nfunction showLoginRequest(responseText, success) {\r\n  if (success) {\r\n    loginAlert.classList.add('success');\r\n  } else {\r\n    loginAlert.classList.remove('success');\r\n  }\r\n  loginAlert.classList.remove('hide');\r\n  loginAlert.textContent = responseText;\r\n}\r\n\r\nfunction hideLoginAlert() {\r\n  loginAlert.classList.add('hide');\r\n}\r\n\r\nfunction getFormData(Form) {\r\n  const inputFields = Form.querySelectorAll('input');\r\n  const formData = {};\r\n  inputFields.forEach((inputField) => {\r\n    formData[inputField.name] = inputField.value;\r\n  });\r\n  return formData;\r\n}\r\n\r\nfunction handleLoginRequest(event) {\r\n  const request = event.target;\r\n  if (request.readyState === 4) {\r\n    const response = JSON.parse(request.responseText);\r\n    if (request.status >= 200 && request.status < 300) {\r\n      showLoginRequest('joepie je bent ingelogd', true);\r\n      if (response.access_token) {\r\n        window.localStorage.setItem('token', response.access_token);\r\n        setTimeout(function () {\r\n          \r\n        })\r\n        window.location = 'closed.html';\r\n      }\r\n    } else if (request.status === 401) {\r\n      showLoginRequest(response.error, false);\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleRegisterRequest(event) {\r\n  const request = event.target;\r\n  if (request.readyState === 4) {\r\n    if (request.status >= 200 && request.status < 300) {\r\n      console.log('success');\r\n      console.log(request);\r\n    } else {\r\n      console.log('error');\r\n      console.log(request);\r\n    }\r\n  }\r\n}\r\n\r\nfunction login(event) {\r\n  event.preventDefault();\r\n  const formData = getFormData(loginForm);\r\n  const request = new XMLHttpRequest();\r\n  request.addEventListener('readystatechange', handleLoginRequest);\r\n  request.open('POST', 'http://connect4.pienter.space/api/auth/login');\r\n  request.setRequestHeader('Content-Type', 'application/json');\r\n  request.send(JSON.stringify(formData));\r\n}\r\n\r\nfunction register(event) {\r\n  event.preventDefault();\r\n  const formData = getFormData(registerForm);\r\n  const request = new XMLHttpRequest();\r\n  request.addEventListener('readystatechange', handleRegisterRequest);\r\n  request.open('POST', 'http://connect4.pienter.space/api/auth/register');\r\n  request.setRequestHeader('Content-Type', 'application/json');\r\n  request.send(JSON.stringify(formData));\r\n}\r\n\r\nloginSwitch.addEventListener('click', showRegisterForm);\r\nregisterSwitch.addEventListener('click', showLoginForm);\r\nloginForm.addEventListener('submit', login);\r\nregisterForm.addEventListener('submit', register);\r\nloginForm.addEventListener('input', hideLoginAlert);\r\n\r\nwindow.history.pushState({}, 'test2', 'closed.html');\r\n"],"file":"login.js"}