{"version":3,"sources":["../../src/js/login.js"],"names":["loginSwitch","document","querySelector","registerSwitch","loginForm","registerForm","loginAlert","switchForm","fromForm","toForm","classList","add","remove","showLoginForm","event","preventDefault","showRegisterForm","showLoginRequest","responseText","success","textContent","hideLoginAlert","getFormData","Form","inputFields","querySelectorAll","formData","forEach","inputField","name","value","handleLoginRequest","request","target","readyState","response","JSON","parse","status","access_token","window","localStorage","setItem","setTimeout","location","error","handleRegisterRequest","console","log","login","XMLHttpRequest","addEventListener","open","setRequestHeader","send","stringify","register","history","pushState"],"mappings":"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","sourcesContent":["const loginSwitch = document.querySelector('.login-switch');\r\nconst registerSwitch = document.querySelector('.register-switch');\r\nconst loginForm = document.querySelector('.wrapper');\r\nconst registerForm = document.querySelector('.wrapper-registration');\r\nconst loginAlert = document.querySelector('.error');\r\n\r\nfunction switchForm(fromForm, toForm) {\r\n  fromForm.classList.add('hide');\r\n  toForm.classList.remove('hide');\r\n}\r\n\r\nfunction showLoginForm(event) {\r\n  event.preventDefault();\r\n  switchForm(registerForm, loginForm);\r\n}\r\n\r\nfunction showRegisterForm(event) {\r\n  event.preventDefault();\r\n  switchForm(loginForm, registerForm);\r\n}\r\n\r\nfunction showLoginRequest(responseText, success) {\r\n  if (success) {\r\n    loginAlert.classList.add('success');\r\n  } else {\r\n    loginAlert.classList.remove('success');\r\n  }\r\n  loginAlert.classList.remove('hide');\r\n  loginAlert.textContent = responseText;\r\n}\r\n\r\nfunction hideLoginAlert() {\r\n  loginAlert.classList.add('hide');\r\n}\r\n\r\nfunction getFormData(Form) {\r\n  const inputFields = Form.querySelectorAll('input');\r\n  const formData = {};\r\n  inputFields.forEach((inputField) => {\r\n    formData[inputField.name] = inputField.value;\r\n  });\r\n  return formData;\r\n}\r\n\r\nfunction handleLoginRequest(event) {\r\n  const request = event.target;\r\n  if (request.readyState === 4) {\r\n    const response = JSON.parse(request.responseText);\r\n    if (request.status >= 200 && request.status < 300) {\r\n      showLoginRequest('joepie je bent ingelogd', true);\r\n      if (response.access_token) {\r\n        window.localStorage.setItem('token', response.access_token);\r\n        setTimeout(function () {\r\n          \r\n        })\r\n        window.location = 'closed.html';\r\n      }\r\n    } else if (request.status === 401) {\r\n      showLoginRequest(response.error, false);\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleRegisterRequest(event) {\r\n  const request = event.target;\r\n  if (request.readyState === 4) {\r\n    if (request.status >= 200 && request.status < 300) {\r\n      console.log('success');\r\n      console.log(request);\r\n    } else {\r\n      console.log('error');\r\n      console.log(request);\r\n    }\r\n  }\r\n}\r\n\r\nfunction login(event) {\r\n  event.preventDefault();\r\n  const formData = getFormData(loginForm);\r\n  const request = new XMLHttpRequest();\r\n  request.addEventListener('readystatechange', handleLoginRequest);\r\n  request.open('POST', 'http://connect4.pienter.space/api/auth/login');\r\n  request.setRequestHeader('Content-Type', 'application/json');\r\n  request.send(JSON.stringify(formData));\r\n}\r\n\r\nfunction register(event) {\r\n  event.preventDefault();\r\n  const formData = getFormData(registerForm);\r\n  const request = new XMLHttpRequest();\r\n  request.addEventListener('readystatechange', handleRegisterRequest);\r\n  request.open('POST', 'http://connect4.pienter.space/api/auth/register');\r\n  request.setRequestHeader('Content-Type', 'application/json');\r\n  request.send(JSON.stringify(formData));\r\n}\r\n\r\nloginSwitch.addEventListener('click', showRegisterForm);\r\nregisterSwitch.addEventListener('click', showLoginForm);\r\nloginForm.addEventListener('submit', login);\r\nregisterForm.addEventListener('submit', register);\r\nloginForm.addEventListener('input', hideLoginAlert);\r\n\r\nwindow.history.pushState({}, 'test2', 'closed.html');\r\n"],"file":"login.js"}